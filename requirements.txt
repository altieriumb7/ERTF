cd ~/ERTF           # repo root
cp requirements.txt requirements.txt.bak

cat > requirements.txt <<'REQ'
# Minimal pinned environment tuned for ERTF pipeline (adjust torch for your CUDA if needed)
torch>=2.0.1
transformers==4.31.0

# RL / accelerator / PEFT / BNB
accelerate>=1.4.0
trl==0.22.2
peft==0.5.0
bitsandbytes==0.40.2

# Datasets / evaluation / numeric parsing
datasets>=3.0.0
sympy==1.12
sentence-transformers==2.2.2
faiss-cpu==1.7.4

# Logging & tooling
wandb==0.15.12
huggingface_hub==0.17.1
ruamel.yaml==0.17.21
psutil

# Safety/compat
numpy<2

# Extras
safetensors
tokenizers
REQ

echo "Wrote new requirements.txt (backup at requirements.txt.bak)"
